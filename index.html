<!DOCTYPE html>
<html>
<head>
  <title>Shoe Information</title>
  <style>
    #shoeInfo {
      border: 1px solid #ccc;
      padding: 20px;
      margin: 20px auto;
      width: 500px;
    }
    img{
      max-width: 300px;
      max-height: 300px;
    }
  </style>
</head>
<body>

  <h1>Shoe Information</h1>

  <label for="shoeId">Enter Shoe ID:</label>
  <input type="text" id="shoeId" value="04:b2:1c:8e:df:61:80">
  <button onclick="getShoeInfo()">Get Shoe Info</button>

  <div id="shoeInfo">
    <p>Enter a Shoe ID and click "Get Shoe Info".</p>
  </div>

  <script>
    function getShoeInfo() {
      const shoeId = document.getElementById("shoeId").value;
      const cloudFunctionUrl = `https://getshoeinfo-53457502908.us-central1.run.app/?id=${shoeId}`;

      fetch(cloudFunctionUrl)
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          return response.json();
        })
        .then(data => {
          displayShoeInfo(data);
        })
        .catch(error => {
          document.getElementById("shoeInfo").innerHTML = `<p>Error: ${error.message}</p>`;
        });
    }

    function displayShoeInfo(data) {
      let html = "";
      if (data) {
        for (const key in data) {
          if (data.hasOwnProperty(key)) {
            if(key === "ImageURL"){
                html += `<p><strong>${key}:</strong> <img src="${data[key]}" alt="Shoe Image"></p>`;
            } else {
              html += `<p><strong>${key}:</strong> ${data[key]}</p>`;
            }
          }
        }
      } else {
        html = "<p>Shoe information not found.</p>";
      }
      document.getElementById("shoeInfo").innerHTML = html;
    }
  </script>

</body>
</html>
